---
import HeroSection from '../components/HeroSection.astro';
import BiographySection from '../components/BiographySection.astro';
import VerticalTimeline from '../components/VerticalTimeline.astro';
import References from '../components/References.astro';
import Footer from '../components/Footer.astro';

import '../styles/global.css';
import '../styles/hero.css';
import '../styles/biography.css';
import '../styles/Timeline.css';
---

<html lang="es">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="viewport" content="width=device-width" />
		<meta name="generator" content={Astro.generator} />
		<title>Vincent van Gogh | Legado Artístico</title>
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
		<link rel="preload" href="/noche-estrellada.webm" as="video" type="video/mp4">
	</head>
	<body>
		<main>
        
			<HeroSection />
			<div id="biografia">
				<BiographySection />
			</div>
			<VerticalTimeline />
			<References />
			<Footer />

			<div class="music-player">
				<button class="music-btn" id="playPauseBtn">
					<i class="fas fa-play"></i>
				</button>
				
				<div class="music-info">
					<div class="music-title" id="musicTitle">Música</div>
					<div class="music-composer" id="musicComposer">Compositor</div>
				</div>
				
				<div class="music-visualizer">
					<div class="bar"></div>
					<div class="bar"></div>
				</div>
				
				<div class="volume-control">
					<i class="fas fa-volume-up" style="color: #D4AF37;"></i>
					<input type="range" class="volume-slider" id="volumeSlider" min="0" max="1" step="0.1" value="0.5">
				</div>
			</div>
			
			<audio id="backgroundMusic1" preload="auto">
				<source src="/Melody.mp3" type="audio/mpeg">
			</audio>
			
			<audio id="backgroundMusic2" preload="auto">
				<source src="/LoveStory.mp3" type="audio/mpeg">
			</audio>

					<script>
			document.addEventListener('DOMContentLoaded', function() {
				const playPauseBtn = document.getElementById('playPauseBtn');
				const volumeSlider = document.getElementById('volumeSlider');
				const musicTitle = document.getElementById('musicTitle');
				const musicComposer = document.getElementById('musicComposer');
				const music1 = document.getElementById('backgroundMusic1');
				const music2 = document.getElementById('backgroundMusic2');
				
				const musicTracks = [
					{
						element: music1,
						title: "You Are My Melody",
						composer: "Unis Abdullaev"
					},
					{
						element: music2, 
						title: "Love Story",
						composer: "Flavio Belardo"
					}
				];
				
				let currentTrackIndex = 0;
				let isPlaying = false;
				
				music1.volume = 0.2;
				music2.volume = 0.2;
				
				music1.addEventListener('ended', playNextTrack);
				music2.addEventListener('ended', playNextTrack);
				
				volumeSlider.addEventListener('input', function() {
					const volume = parseFloat(this.value);
					music1.volume = volume;
					music2.volume = volume;
				});
				
				playPauseBtn.addEventListener('click', function() {
					if (isPlaying) {
						pauseMusic();
					} else {
						playMusic();
					}
				});
				
				function playNextTrack() {
					musicTracks[currentTrackIndex].element.pause();
					
					currentTrackIndex = (currentTrackIndex + 1) % musicTracks.length;
					
					playCurrentTrack();
				}
				
				function playCurrentTrack() {
					const currentTrack = musicTracks[currentTrackIndex];
					
					musicTitle.textContent = currentTrack.title;
					musicComposer.textContent = currentTrack.composer;
					
					currentTrack.element.play()
						.then(() => {
							isPlaying = true;
							playPauseBtn.innerHTML = '<i class="fas fa-pause"></i>';
						})
						.catch(error => {
							console.log("Error al reproducir música:", error);
						});
				}
				
				function playMusic() {
					playCurrentTrack();
				}
				
				function pauseMusic() {
					musicTracks[currentTrackIndex].element.pause();
					isPlaying = false;
					playPauseBtn.innerHTML = '<i class="fas fa-play"></i>';
				}
				
				window.addEventListener('load', function() {
					musicTitle.textContent = "Click para reproducir";
					musicComposer.textContent = "Música";
				});
			});
		</script>

		</main>
	</body>
</html>
